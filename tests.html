<!DOCTYPE html>
<html>
    <head>
        <title>Test cases for jqBootstrapValidation</title>
        <link rel="stylesheet" href="css/bootstrap.css" />
        <link rel="stylesheet" href="css/prettify.css" />
        <script src="js/jQuery-1.7.2-min.js"></script>
        <script src="js/bootstrap.js"></script>
        <script src="js/json2.js"></script>
        <script src="js/jqBootstrapValidation.js"></script>
        <script>
            $(function() {
                $("input,checkbox,textarea,select").not("[type=submit],[type=image]").jqBootstrapValidation(
                    {
                        preventSubmit: true,
                        filter: function() {
                            return false;
                        }
                    }
                );
            });

            var toType = function(obj) {
                return ({}).toString.call(obj).match(/\s([a-zA-Z]+)/)[1].toLowerCase()
            }

            var allowSubmitting = false;

            $(function() {

                var foundAnyErrors = false;
                var testCount = 0;

                $("form").bind("submit", function(event) {
                    if (!allowSubmitting) {
                        event.preventDefault();
                    }
                    return allowSubmitting;
                });

                $(".testme").each(function(i, el) {
                    var $el = $(el);
                    var tests = {};
                    var fieldName = $el.attr("name");
                    $.each($el.data(), function(key, val) {
                        if (key.match(/^testing[A-Z]/)) {
                            var matches = /^testing([A-Z][^A-Z]+)([A-Z][^A-Z]+)$/.exec(key);
                            if (!tests[matches[1]]) {
                                tests[matches[1]] = {};
                            }
                            tests[matches[1]][matches[2]] = val;
                        }
                    });

                    var failures = [];

                    $.each(tests, function(testName, params) {
                        testCount++;
                        if (params.Checked !== undefined) {
                            $el.attr("checked", !!(params.Checked));
                        }
                        if (params.Value !== undefined) {
                            $el.val(params.Value);
                        }
                        if (params.Value !== undefined && $el.val() !== ""+params.Value) {
                            var message = "Could not test '" + testName + "' as the value '" + params.Value + "' was rejected by the browser";
                            failures.push(message);
                        } else {
                            var message = $el.triggerHandler("validation.validation", {includeEmpty: !!(params.Empty), submitting: !!(params.Submit)});
                            if (
                                JSON.stringify(message, null, 2) !== JSON.stringify(params.Message, null, 2)
                                ) {
                                foundAnyErrors = true;
                                failures.push("Failed '" + testName + "'");
                                $el.parents(".control-group").addClass("error");
                                console.log("Failed on field '" + fieldName + "' on test '" + testName + "' as received unexpected response:");
                                console.log(message);
                                console.log("when expecting:");
                                console.log(params.Message);
                            }
                        }
                    });
                    if (failures.length) {
                        $el.parents(".control-group").find(".help-block").html(failures.join("<br />"));
                    } else {
                        $el.parents(".control-group").find(".help-block").html("OK");
                    }
                });

                console.log("Ran " + testCount + " tests " + (foundAnyErrors ? "--" : "with no") + " errors found");
            });
        </script>
        <style>
            .testme
            {
                /* just including this to shut up netbeans so i can see actual errors */
            }
        </style>
    </head>
    <body>
        <div class="container">
            <form action="http://www.exmaple.com" method="post" novalidate="novalidate" novalidate>
                <div class="control-group">
                    <input 
                        class="testme" 
                        type="text"
                        name="min" 
                        min="10" 
                        data-validation-min-message='failed'

                        data-testing-empty-value="" 
                        data-testing-empty-message="[]"

                        data-testing-emptydeep-value=""
                        data-testing-emptydeep-message='[]'
                        data-testing-emptydeep-empty="true"

                        data-testing-invalid-value="sausages" 
                        data-testing-invalid-message='[]' 

                        data-testing-too_low-value="5" 
                        data-testing-too_low-message='["failed"]' 

                        data-testing-ok-value="10" 
                        data-testing-ok-message="[]" 

                        />
                    <div class="help-block">...</div>
                </div>
                <div class="control-group">
                    <input 
                        class="testme"
                        type="email"
                        name="email"
                        data-validation-email-message="failed"

                        data-testing-empty-value=""
                        data-testing-empty-message="[]"

                        data-testing-emptydeep-value=""
                        data-testing-emptydeep-message='["failed"]'
                        data-testing-emptydeep-empty="true"

                        data-testing-noat-value="testtest.com"
                        data-testing-noat-message='["failed"]'

                        data-testing-notld-value="test@test"
                        data-testing-notld-message='["failed"]'

                        data-testing-ok-value="test@test.com"
                        data-testing-ok-message="[]"
                        />
                    <div class="help-block">...</div>
                </div>
                <div class="control-group">
                    <input
                        class="testme"
                        type="text"
                        name="emailmatch"

                        data-validation-match-match="email"
                        data-validation-match-message="failed"

                        data-testing-empty-value=""
                        data-testing-empty-message="[]"

                        data-testing-emptydeep-value=""
                        data-testing-emptydeep-message='["failed"]'
                        data-testing-emptydeep-empty="true"

                        data-testing-emptysubmit-value=""
                        data-testing-emptysubmit-message='["failed"]'
                        data-testing-emptysubmit-submit="true"

                        data-testing-mismatch-value="fail@fail.com"
                        data-testing-mismatch-message='["failed"]'

                        data-testing-ok-value="test@test.com"
                        data-testing-ok-message="[]"
                        >
                    <div class="help-block">...</div>
                </div>
                <div class="control-group">
                    <input 
                        class="testme"
                        type="text"
                        name="email_data_attributes"
                        data-validation-validemail-message="failed"

                        data-testing-empty-value=""
                        data-testing-empty-message="[]"

                        data-testing-emptydeep-value=""
                        data-testing-emptydeep-message='["failed"]'
                        data-testing-emptydeep-empty="true"

                        data-testing-noat-value="testtest.com"
                        data-testing-noat-message='["failed"]'

                        data-testing-notld-value="test@test"
                        data-testing-notld-message='["failed"]'

                        data-testing-ok-value="test@test.com"
                        data-testing-ok-message="[]"
                        />
                    <div class="help-block">...</div>
                </div>
                <div class="control-group">
                    <input 
                        class="testme"
                        type="text"
                        name="maxmin"

                        max="8"
                        min="8"

                        data-validation-max-message="failedmax"
                        data-validation-min-message="failedmin"

                        data-testing-toolow-value="7.9"
                        data-testing-toolow-message='["failedmin"]'

                        data-testing-toohigh-value="8.1"
                        data-testing-toohigh-message='["failedmax"]'

                        data-testing-empty-value=""
                        data-testing-empty-message="[]"

                        data-testing-emptydeep-value=""
                        data-testing-emptydeep-message="[]"
                        data-testing-emptydeep-empty="true"

                        data-testing-ok-value="8"
                        data-testing-ok-message="[]"
                        />
                    <div class="help-block">...</div>
                </div>
                <div class="control-group">
                    <input 
                        class="testme"
                        type="text"
                        name="required"

                        required

                        data-validation-required-message="failed"

                        data-testing-empty-value=""
                        data-testing-empty-message='[]'

                        data-testing-falsy-value="0"
                        data-testing-falsy-message="[]"

                        data-testing-emptydeep-value=""
                        data-testing-emptydeep-message='["failed"]'
                        data-testing-emptydeep-empty="true"

                        data-testing-ok-value="testing"
                        data-testing-ok-message="[]"
                        />
                    <div class="help-block">...</div>
                </div>
                <div class="control-group">
                    <input 
                        class="testme"
                        type="text"
                        name="number"
                        data-validation-number-message="failed"

                        data-testing-empty-value=""
                        data-testing-empty-message='[]'

                        data-testing-emptydeep-value=""
                        data-testing-emptydeep-message='[]'
                        data-testing-emptydeep-empty="true"

                        data-testing-invalid-value="sausages"
                        data-testing-invalid-message='["failed"]'

                        data-testing-fakedecimals-value="..4.22"
                        data-testing-fakedecimals-message='["failed"]'

                        data-testing-exponents-value="-0.1e+1"
                        data-testing-exponents-message='[]'

                        data-testing-decimal-value="12.34"
                        data-testing-decimal-message='[]'

                        data-testing-negative-value="-42"
                        data-testing-negative-message="[]"

                        data-testing-ok-value="42"
                        data-testing-ok-message='[]'
                        />
                    <div class="help-block">...</div>
                </div>
                <div class="control-group">
                    <input 
                        class="testme"
                        type="text"
                        name="minlength"
                        minlength="5"
                        data-validation-minlength-message="failed"

                        data-testing-empty-value=""
                        data-testing-empty-message='[]'

                        data-testing-emptydeep-value=""
                        data-testing-emptydeep-message='["failed"]'
                        data-testing-emptydeep-empty="true"

                        data-testing-short-value="123"
                        data-testing-short-message='["failed"]'

                        data-testing-ok-value="12345"
                        data-testing-ok-message='[]'
                        />
                    <div class="help-block">...</div>
                </div>
                <div class="control-group">
                    <input 
                        class="testme"
                        type="text"
                        name="maxlength"
                        maxlength="5"
                        data-validation-maxlength-message="failed"

                        data-testing-empty-value=""
                        data-testing-empty-message='[]'

                        data-testing-emptydeep-value=""
                        data-testing-emptydeep-message='[]'
                        data-testing-emptydeep-empty="true"

                        data-testing-too_long-value="123456"
                        data-testing-too_long-message='["failed"]'

                        data-testing-ok-value="12345"
                        data-testing-ok-message='[]'
                        />
                    <div class="help-block">...</div>
                </div>
                <div class="control-group">
                    <input 
                        class="testme"
                        type="text"
                        name="pattern"
                        pattern="(a.*z)?"
                        data-validation-pattern-message="failed"

                        data-testing-empty-value=""
                        data-testing-empty-message='[]'

                        data-testing-emptydeep-value=""
                        data-testing-emptydeep-message='[]'
                        data-testing-emptydeep-empty="true"

                        data-testing-invalid-value="notvalid"
                        data-testing-invalid-message='["failed"]'

                        data-testing-ok-value="alphabetz"
                        data-testing-ok-message='[]'
                        />
                    <div class="help-block">...</div>
                </div>
                <div class="control-group">
                    <select
                        class="testme"
                        name="select"

                        required
                        data-validation-required-message="failed"

                        data-testing-emptydeep-value=""
                        data-testing-emptydeep-message='["failed"]'
                        data-testing-emptydeep-empty="true"

                        data-testing-empty-value=""
                        data-testing-empty-message='[]'

                        data-testing-ok-value="test"
                        data-testing-ok-message="[]"
                        >
                        <option value="">-- Select the option --</option>
                        <option value="test">Test</option>
                    </select>
                    <div class="help-block">...</div>
                </div>
                <div class="control-group">
                    <input
                        class="testme"
                        name="emailsubmit"
                        type="email" 
                        data-validation-email-message="invalid"

                        data-testing-empty-value=""
                        data-testing-empty-message="[]"
                        data-testing-empty-submit="true"

                        data-testing-invalid-value="invalid"
                        data-testing-invalid-message='["invalid"]'
                        data-testing-invalid-submit="true"
                        />

                    <div class="help-block">...</div>
                </div>
                <div class="control-group">
                    <input 
                        class="testme"
                        name="emailrequiredsubmit"
                        type="email"
                        required
                        data-validation-email-message="invalid"
                        data-validation-required-message="required"

                        data-testing-empty-value=""
                        data-testing-empty-message='["required"]'
                        data-testing-empty-submit="true"

                        data-testing-invalid-value="invalid"
                        data-testing-invalid-message='["invalid"]'
                        data-testing-invalid-submit="true"
                        />

                    <div class="help-block">...</div>
                </div>
                <div class="control-group">
                    <input name="email" value="test@test.com" />
                    <input 
                        class="testme"
                        name="emailmatchsubmit"
                        type="text"

                        data-validation-match-match="email"
                        data-validation-match-message="mismatch"

                        data-testing-empty-value=""
                        data-testing-empty-message='["mismatch"]'
                        data-testing-empty-submit="true"

                        data-testing-ok-value="test@test.com"
                        data-testing-ok-message='[]'
                        data-testing-ok-submit="true"
                        />

                    <div class="help-block">...</div>
                </div>
                <div class="control-group">
                    <input 
                        type="checkbox"
                        value="okay"
                        name="checkboxsubmit"
                        class="testme"

                        required
                        data-validation-required-message="required"

                        data-testing-off-checked="0"
                        data-testing-off-message='[]'

                        data-testing-offsubmit-checked="0"
                        data-testing-offsubmit-message='["required"]'
                        data-testing-offsubmit-submit="true"

                        data-testing-on-checked="1"
                        data-testing-on-message='[]'
                        />
                    <div class="help-block"></div>
                </div>
            </form>
            <form id="poop">
                <div class="control-group">
                    <label class="control-label">Quality Control</label>
                    <div class="controls">
                        <label class="checkbox">
                            <input 
                                class="testme"
                                type="checkbox" 
                                name="qualityControl[]" 
                                value="fast"

                                data-validation-minchecked-minchecked="2"
                                data-validation-minchecked-message="low"

                                data-testing-low-checked="0"
                                data-testing-low-message='["low"]'
                                data-testing-low-submit="true"

                                data-testing-ok-checked="1"
                                data-testing-ok-message='[]'
                                data-testing-ok-submit="true"
                                />
                            Fast
                        </label>
                        <label class="checkbox">
                            <input type="checkbox" name="qualityControl[]" value="cheap" checked="checked">
                            Cheap
                        </label>
                        <label class="checkbox">
                            <input type="checkbox" name="qualityControl[]" value="good">
                            Good
                        </label>
                        <p class="help-block"></p>
                    </div>
                </div>
            </form>
            <form>
                <div class="control-group">
                    <label class="control-label">Quality Control</label>
                    <div class="controls">
                        <label class="checkbox">
                            <input 
                                class="testme"
                                type="checkbox" 
                                name="qualityControl[]" 
                                value="fast"
                                data-validation-maxchecked-maxchecked="2" 
                                data-validation-maxchecked-message="high"

                                data-testing-greedy-checked="1"
                                data-testing-greedy-message='["high"]'
                                />
                            Fast
                        </label>
                        <label class="checkbox">
                            <input type="checkbox" name="qualityControl[]" value="cheap" checked="checked">
                            Cheap
                        </label>
                        <label class="checkbox">
                            <input type="checkbox" name="qualityControl[]" value="good" checked="checked">
                            Good
                        </label>
                        <p class="help-block"></p>
                    </div>
                </div>
            </form>
        </div>
    </body>
</html>
